{% extends 'base.html' %}
{% block title %}Advanced search{% endblock %}
{% block content %}
<div class="row">
    <div class="col-sm-12">
        <h1>
            Advanced search
        </h1>
        <form>
            <div class="form-group">
                <input type="text" class="form-control" name="term" placeholder="Search term">
            </div>
            <div class="form-group">
                <label class="checkbox-inline" for="table_name">
                    <input type="checkbox" name="table_name" value="candidates"> Candidates
                </label>
                <label class="checkbox-inline" for="table_name">
                    <input type="checkbox" name="table_name" value="committees"> Committees
                </label>
                <label class="checkbox-inline" for="table_name">
                    <input type="checkbox" name="table_name" value="officers"> Committee officers
                </label>
                <label class="checkbox-inline" for="table_name">
                    <input type="checkbox" name="table_name" value="receipts"> Donors
                </label>
                <label class="checkbox-inline" for="table_name">
                    <input type="checkbox" name="table_name" value="expenditures"> Expenditures
                </label>
                <label class="checkbox-inline" for="table_name">
                    <input type="checkbox" name="table_name" value="investments"> Investments
                </label>
            </div>
            <div class="form-group">
                <div class="row">
                    <div class="col-sm-6">
                        <label for="election_type">Election type</label>
                        <select class="form-control" name="election_type">
                            <option value="">------</option>
                            <option value="General Election">General Election</option>
                            <option value="General Primary">General Primary</option>
                            <option value="Consolidated Election">Consolidated Election</option>
                            <option value="Consolidated Primary">Consolidated Primary</option>
                            <option value="Special Primary">Special Primary</option>
                        </select>
                    </div>
                    <div class="col-sm-6">
                        <label for="election_year">Election year</label>
                        <select class="form-control" name="election_year">
                            <option value="">------</option>
                            {% for year in range(2018, 1979, -1)%}
                                {% if year == now.year %}
                                    <option value="{{ year }}" selected=true>{{ year }}</option>
                                {% else %}
                                    <option value="{{ year }}">{{ year }}</option>
                                {% endif %}
                            {% endfor %}
                        </select>
                    </div>
                </div>
            </div>
            <div class="form-group">
                <div class="row">
                    <div class="col-sm-3">
                        <label for="contribution_operator">Operator</label>
                        <select class="form-control" name="contribution_operator">
                            <option value="">------</option>
                            <option value="greater_than">Greater than</option>
                            <option value="less_than">Less than</option>
                            <option value="equal_to">Equal to</option>
                        </select>
                    </div>
                    <div class="col-sm-9">
                        <label for="contribution_amount">Contribution amount</label>
                        <input type="text" class="form-control" name="contribution_amount" placeholder="">
                    </div>
                </div>
            </div>
            <button type="submit" class="btn btn-default">Submit</button>
        </form>
    </div>
</div>

{% endblock %}
{% block extra_javascript %}
<script type="text/javascript">
    $(document).ready(function(){
        $('form').on('submit', function(e){
            e.preventDefault();
            var params = $(this).serialize();
            $.when($.getJSON("{{ url_for('api.advanced_search') }}" + '?' + params)).then(
                function(resp){
                    console.log(resp)
                }
            )
        })
    })
</script>
{% endblock %}
